# ðŸ“° News Bot â€” ÑƒÐ¼Ð½Ñ‹Ð¹ Telegram-Ð±Ð¾Ñ‚ Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸ IT-Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹

![Tests](https://github.com/Golden-boy-jk/News_bot/actions/workflows/ci.yml/badge.svg)
![Coverage](https://img.shields.io/badge/coverage-100%25-brightgreen)
![Python](https://img.shields.io/badge/python-3.11-blue)
![License](https://img.shields.io/badge/license-MIT-green)

ðŸ“° News Bot â€” Telegram IT News Aggregator

Productionâ€‘ready Telegramâ€‘Ð±Ð¾Ñ‚ Ð´Ð»Ñ Ð°Ð³Ñ€ÐµÐ³Ð°Ñ†Ð¸Ð¸ Ð¸ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸ Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹ Ð¸Ð· ITâ€‘Ð¼Ð¸Ñ€Ð°. ÐŸÑ€Ð¾ÐµÐºÑ‚ ÑÐ´ÐµÐ»Ð°Ð½ ÐºÐ°Ðº petâ€‘project ÑƒÑ€Ð¾Ð²Ð½Ñ Middle, Ñ ÑƒÐ¿Ð¾Ñ€Ð¾Ð¼ Ð½Ð° Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñƒ, Ñ‚ÐµÑÑ‚Ð¸Ñ€ÑƒÐµÐ¼Ð¾ÑÑ‚ÑŒ Ð¸ ÑƒÑÑ‚Ð¾Ð¹Ñ‡Ð¸Ð²Ð¾ÑÑ‚ÑŒ.

- ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ Ð² **09:00 (Europe/Moscow)** ÑÐ¾Ð±Ð¸Ñ€Ð°ÐµÑ‚ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸ Ñ Ñ‚Ð¾Ð¿-Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð²;
- Ð¸Ð·Ð²Ð»ÐµÐºÐ°ÐµÑ‚ Ñ‚ÐµÐºÑÑ‚, Ð¾Ñ‡Ð¸Ñ‰Ð°ÐµÑ‚ ÐµÐ³Ð¾ Ð¸ Ð½Ð¾Ñ€Ð¼Ð°Ð»Ð¸Ð·ÑƒÐµÑ‚;
- Ð¾Ñ†ÐµÐ½Ð¸Ð²Ð°ÐµÑ‚ Ð²Ð°Ð¶Ð½Ð¾ÑÑ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑŒÐ¸ Ñ‡ÐµÑ€ÐµÐ· **TF-IDF + keyword scoring**;
- ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² SQLite;
- Ð¿ÑƒÐ±Ð»Ð¸ÐºÑƒÐµÑ‚ Ð»ÑƒÑ‡ÑˆÐ¸Ðµ Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸ Ð´Ð½Ñ Ð² Telegram;
- Ð¿Ð¾ ÑÑƒÐ±Ð±Ð¾Ñ‚Ð°Ð¼ Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€ÑƒÐµÑ‚ Ð¿Ð¾Ð´Ð±Ð¾Ñ€ÐºÑƒ Ñ‚ÑƒÐ»Ð·Ð¾Ð² ðŸ”§;
- Ð¿Ð¾ Ð²Ð¾ÑÐºÑ€ÐµÑÐµÐ½ÑŒÑÐ¼ ÑÐ¾Ð·Ð´Ð°Ñ‘Ñ‚ Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð´Ð°Ð¹Ð´Ð¶ÐµÑÑ‚ ðŸ“°;
- Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ **Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ ÑÐ²ÐµÐ¶ÐµÑÑ‚Ð¸ Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹** Ð¸ ÑˆÐ»Ñ‘Ñ‚ Ð°Ð»ÐµÑ€Ñ‚Ñ‹, ÐµÑÐ»Ð¸ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð¿Ð¾ÑˆÐ»Ð¾ Ð½Ðµ Ñ‚Ð°Ðº.

ÐŸÑ€Ð¾ÐµÐºÑ‚ Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚ **100% Ñ‚ÐµÑÑ‚Ð¾Ð²**, Ð¸Ð¼ÐµÐµÑ‚ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½-Docker Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ, healthcheck, Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð² Ñ„Ð°Ð¹Ð»Ñ‹ Ð¸ Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð³Ð¾Ñ‚Ð¾Ð² Ðº Ñ€Ð°Ð·Ð²Ñ‘Ñ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸ÑŽ Ð½Ð° VPS.

---

# ðŸš€ Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸

### ðŸ“¡ Ð¡Ð±Ð¾Ñ€ Ð¸ Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³ Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹
- ÐµÐ¶ÐµÐ´Ð½ÐµÐ²Ð½Ñ‹Ð¹ ÑÐ±Ð¾Ñ€ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¹ Ð¿Ð¾ Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸ÑŽ (APScheduler);
- Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð° IT-Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð² (AI, Python, Data Engineering, Security);
- Ð¸Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ðµ HTML-ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð° Ð¸ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ° (BeautifulSoup);
- ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ `script`, `style`, `noscript`, Ð½Ð¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ‚ÐµÐºÑÑ‚Ð°.

### ðŸ§  ÐÐ½Ð°Ð»Ð¸Ð· Ð¸ Ñ€Ð°Ð½Ð¶Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
- Ñ€Ð°ÑÑ‡Ñ‘Ñ‚ Ð²Ð°Ð¶Ð½Ð¾ÑÑ‚Ð¸ ÑÑ‚Ð°Ñ‚ÐµÐ¹ Ñ‡ÐµÑ€ÐµÐ· **TF-IDF**;
- Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ **keyword-scoring** (OpenAI, GPT, Python, Spark, Kafka Ð¸ Ð´Ñ€.);
- fallback-Ð»Ð¾Ð³Ð¸ÐºÐ°, ÐµÑÐ»Ð¸ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ ÑÐ»Ð¾Ð²Ð° Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‚.

### ðŸ“¤ ÐŸÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ Ð² Telegram
- ÐµÐ´Ð¸Ð½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð¿Ð¾ÑÑ‚Ð¾Ð²: ðŸ’¡ Ð§Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð¾ / ðŸ“Œ ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ ÑÑ‚Ð¾ Ð²Ð°Ð¶Ð½Ð¾ / ðŸ”— Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº / ðŸ˜… Ð®Ð¼Ð¾Ñ€;
- Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑÐ¾Ð±Ð»ÑŽÐ´ÐµÐ½Ð¸Ðµ Ð»Ð¸Ð¼Ð¸Ñ‚Ð° Telegram (4096 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²);
- ÐµÐ¶ÐµÐ´Ð½ÐµÐ²Ð½Ñ‹Ðµ Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸, Ð¿Ð¾Ð´Ð±Ð¾Ñ€ÐºÐ¸ Ñ‚ÑƒÐ»Ð·Ð¾Ð² Ð¸ Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð´Ð°Ð¹Ð´Ð¶ÐµÑÑ‚Ñ‹;
- Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ ÐºÐ°Ð½Ð°Ð»/Ñ‡Ð°Ñ‚ Ð´Ð»Ñ error-Ð°Ð»ÐµÑ€Ñ‚Ð¾Ð².

### ðŸ›¡ ÐÐ°Ð´Ñ‘Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð¸ ÑÐºÑÐ¿Ð»ÑƒÐ°Ñ‚Ð°Ñ†Ð¸Ñ
- retry + backoff Ð´Ð»Ñ HTTP-Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²;
- Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ ÑÐ²ÐµÐ¶ÐµÑÑ‚Ð¸ Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹;
- healthcheck Ð´Ð»Ñ Docker;
- Ñ„Ð°Ð¹Ð»Ð¾Ð²Ð¾Ðµ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ Ñ€Ð¾Ñ‚Ð°Ñ†Ð¸ÐµÐ¹.

### âœ‚ï¸ ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð´Ð»Ð¸Ð½Ð½Ñ‹Ñ… ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹

Ð”Ð»Ñ Telegram Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ **Ð¼ÑÐ³ÐºÐ¾Ð¹ Ð¾Ð±Ñ€ÐµÐ·ÐºÐ¸ Ñ‚ÐµÐºÑÑ‚Ð°**:

- ÐµÐ´Ð¸Ð½Ð°Ñ Ñ‚Ð¾Ñ‡ÐºÐ° Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ â€” `truncate_message`;
- Ð¾Ð±Ñ€ÐµÐ·ÐºÐ° Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ Ð¿Ð¾ ÑÐ»Ð¾Ð²Ð°Ð¼ Ð¸Ð»Ð¸ Ð¿ÐµÑ€ÐµÐ½Ð¾ÑÐ°Ð¼ ÑÑ‚Ñ€Ð¾Ðº;
- Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ÑÑ Ð¼Ð°Ñ€ÐºÐµÑ€ `(ÑÐ¾ÐºÑ€Ð°Ñ‰ÐµÐ½Ð¾)`;
- ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ **Ð½Ðµ Ñ‡Ð°Ð½ÐºÑƒÑŽÑ‚ÑÑ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ**.


```text
 
id | url | title | summary | content | source | score | fetched_at

url â€” ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð°Ð´Ñ€ÐµÑ ÑÑ‚Ð°Ñ‚ÑŒÐ¸

title â€” Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº

summary â€” ÐºÑ€Ð°Ñ‚ÐºÐ¾Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ (2â€“3 ÑÑ‚Ñ€Ð¾ÐºÐ¸)

content â€” Ð¾Ñ‡Ð¸Ñ‰ÐµÐ½Ð½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚

source â€” Ñ€Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ð½Ð½Ñ‹Ð¹ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº (openai, databricks, docker_blog, â€¦)

score â€” Ð²Ð°Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸

fetched_at â€” Ð²Ñ€ÐµÐ¼Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ (UTC, ISO)

âœ” ÐŸÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ Ð² Telegram

Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð¿Ð¾ÑÑ‚Ð°: ðŸ’¡ Ð§Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð¾ / ðŸ“Œ ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ ÑÑ‚Ð¾ Ð²Ð°Ð¶Ð½Ð¾ / ðŸ”— Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº / ðŸ˜… Ð®Ð¼Ð¾Ñ€ + Ñ…ÑÑˆÑ‚ÐµÐ³Ð¸

Ð°ÐºÐºÑƒÑ€Ð°Ñ‚Ð½Ð°Ñ Ð½Ð°Ñ€ÐµÐ·ÐºÐ° Ñ‚ÐµÐºÑÑ‚Ð°: Ð½Ðµ Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ð¼ Ð·Ð° Ð»Ð¸Ð¼Ð¸Ñ‚ 4096 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²

Markdown-Ñ€Ð°Ð·Ð¼ÐµÑ‚ÐºÐ°

Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ ÐºÐ°Ð½Ð°Ð»/Ñ‡Ð°Ñ‚ Ð´Ð»Ñ error-Ð°Ð»ÐµÑ€Ñ‚Ð¾Ð²

âœ” ÐŸÐ»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‰Ð¸Ðº APScheduler

09:00 â€” ÐµÐ¶ÐµÐ´Ð½ÐµÐ²Ð½Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº NewsProfessor.run_for_today()

10:00 â€” NewsProfessor.run_monitoring() (Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ ÑÐ²ÐµÐ¶ÐµÑÑ‚Ð¸ Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹)

âœ” ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ ÑÐ²ÐµÐ¶ÐµÑÑ‚Ð¸

ÐœÐµÑ‚Ð¾Ð´ run_monitoring():

Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚, ÐµÑÑ‚ÑŒ Ð»Ð¸ Ð²Ð¾Ð¾Ð±Ñ‰Ðµ Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸ Ð² Ð‘Ð”;

ÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ñ‚ Ð´Ð°Ñ‚Ñƒ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¹ Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸;

ÐµÑÐ»Ð¸ Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹ Ð´Ð°Ð²Ð½Ð¾ Ð½Ðµ Ð±Ñ‹Ð»Ð¾ â€” ÑˆÐ»Ñ‘Ñ‚ Ð°Ð»ÐµÑ€Ñ‚;

ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ NULL Ð¸ Ð½ÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ fetched_at.

âœ” Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

ÐœÐ¾Ð´ÑƒÐ»ÑŒ logging_utils.py:

stdout-Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ (ÑƒÐ´Ð¾Ð±Ð½Ð¾ Ð´Ð»Ñ Docker);

Ñ„Ð°Ð¹Ð»Ð¾Ð²Ñ‹Ðµ Ð»Ð¾Ð³Ð¸ /var/log/news_bot/app.log Ð¸ /var/log/news_bot/error.log;

Ñ€Ð¾Ñ‚Ð°Ñ†Ð¸Ñ Ð»Ð¾Ð³Ð¾Ð² Ñ‡ÐµÑ€ÐµÐ· RotatingFileHandler;

Ð°Ð»ÐµÑ€Ñ‚Ñ‹ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐ°Ñ… Ñ‡ÐµÑ€ÐµÐ· Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Telegram-Ñ‡Ð°Ñ‚.

âœ” HTTP-retry

_fetch_html_with_retry() Ð² link_extractor.py;

_download_with_retry() Ð² text_parser.py;

Ð´Ð¾ 3 Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð¾Ðº, Ð¾Ð¶Ð¸Ð´Ð°Ð½Ð¸Ðµ Ð¼ÐµÐ¶Ð´Ñƒ Ñ€ÐµÑ‚Ñ€Ð°ÑÐ¼Ð¸, Ð² ÑÐ»ÑƒÑ‡Ð°Ðµ Ð¿Ñ€Ð¾Ð²Ð°Ð»Ð° â€” RuntimeError (Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¾ Ñ‚ÐµÑÑ‚Ð°Ð¼Ð¸).

âœ” Healthcheck

ÐœÐ¾Ð´ÑƒÐ»ÑŒ app.healthcheck:

Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° ENV (TELEGRAM_* Ð¸ DATABASE_PATH);

Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚Ð¸ Ð‘Ð” (SELECT 1);

ÐºÐ¾Ð´ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ð° 0 / 1 â€” ÑƒÐ´Ð¾Ð±Ð½Ð¾ Ð´Ð»Ñ Docker HEALTHCHECK.

ðŸ“… ÐšÐ¾Ð½Ñ‚ÐµÐ½Ñ‚-Ð¿Ð»Ð°Ð½
Ð”ÐµÐ½ÑŒ	Ð¢ÐµÐ¼Ð°
ÐŸÐ½	ðŸ¤– AI Ð¸ Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚Ð¸
Ð’Ñ‚	ðŸ Python
Ð¡Ñ€	ðŸ“Š Data Engineering
Ð§Ñ‚	ðŸ”’ Security
ÐŸÑ‚	ðŸ›  DevTools Ð¸ ÑÐµÑ€Ð²Ð¸ÑÑ‹
Ð¡Ð±	ÐŸÐ¾Ð´Ð±Ð¾Ñ€ÐºÐ° Ñ‚ÑƒÐ»Ð·Ð¾Ð²
Ð’Ñ	ÐÐµÐ´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð´Ð°Ð¹Ð´Ð¶ÐµÑÑ‚

Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð²ÑÐµÑ… Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹ Ð¸ Ð´Ð°Ð¹Ð´Ð¶ÐµÑÑ‚Ð¾Ð² â€” ÐµÐ´Ð¸Ð½Ñ‹Ð¹:
ðŸ’¡ Ð§Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð¾ / ðŸ“Œ ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ ÑÑ‚Ð¾ Ð²Ð°Ð¶Ð½Ð¾ / ðŸ”— Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº / ðŸ˜… Ð®Ð¼Ð¾Ñ€ + 2 ÑÐ»Ð¾Ñ Ñ…ÑÑˆÑ‚ÐµÐ³Ð¾Ð².

---

# ðŸ“‚ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
```app/
â”‚â”€â”€ config.py            # Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº Ð¸Ð· .env
â”‚â”€â”€ db.py                # SQLite + Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸
â”‚â”€â”€ error_notifier.py    # Telegram-Ð°Ð»ÐµÑ€Ñ‚Ñ‹ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐ°Ñ…
â”‚â”€â”€ filters.py           # Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ñ ÑÑÑ‹Ð»Ð¾Ðº Ð¿Ð¾ Ð¿Ð¾Ð´ÑÑ‚Ñ€Ð¾ÐºÐµ
â”‚â”€â”€ healthcheck.py       # ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ Ð¸ Ð‘Ð”
â”‚â”€â”€ link_extractor.py    # HTML â†’ ÑÐ¿Ð¸ÑÐ¾Ðº ÑÑÑ‹Ð»Ð¾Ðº (Ñ retry)
â”‚â”€â”€ logging_utils.py     # Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ + Ñ€Ð¾Ñ‚Ð°Ñ†Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð¾Ð²
â”‚â”€â”€ main.py              # ÐžÐ´Ð½Ð¾Ñ€Ð°Ð·Ð¾Ð²Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð°
â”‚â”€â”€ news_professor.py    # ÐžÑ€ÐºÐµÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€: ÑÐ±Ð¾Ñ€, Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³, Ñ€Ð°Ð½Ð¶Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ, Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ, Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³
â”‚â”€â”€ scheduler_main.py    # APScheduler (09:00 Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸, 10:00 Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³)
â”‚â”€â”€ scoring.py           # TF-IDF + keyword scoring
â”‚â”€â”€ telegram_bot.py      # Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ° ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹
â”‚â”€â”€ text_parser.py       # HTML â†’ Ð¾Ñ‡Ð¸Ñ‰ÐµÐ½Ð½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚ (Ñ retry)
â”‚â”€â”€ text_utils.py        # Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ñ‹ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð¼ (Ð»Ð¸Ð¼Ð¸Ñ‚ Telegram)
tests/
â”‚â”€â”€ test_*.py            # ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð½Ð°Ð±Ð¾Ñ€ Ñ‚ÐµÑÑ‚Ð¾Ð² (100% coverage)
docker-compose.yml       # Dev Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ
docker-compose.production.yml  # ÐŸÑ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½-Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ
Dockerfile               # ÐœÐ½Ð¾Ð³Ð¾Ñ€Ð°Ð·Ð¾Ð²Ñ‹Ð¹ Ð¾Ð±Ñ€Ð°Ð· Ð±Ð¾Ñ‚Ð°
README.md
PRODUCTION_DEPLOY.md

```

## ðŸ“¦ Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

```bash
git clone https://github.com/Golden-boy-jk/News_bot.git
cd News_bot
pip install -r requirements.txt
```

ðŸ§ª Ð¢ÐµÑÑ‚Ñ‹

ÐŸÑ€Ð¾ÐµÐºÑ‚ Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚ 100% Ñ‚ÐµÑÑ‚Ð¾Ð².

```Ð—Ð°Ð¿ÑƒÑÐº: pytest```

ÐŸÐ¾ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ:

```pytest --cov=app --cov-report=term-missing:skip-covered```

ðŸ›  Ð—Ð°Ð¿ÑƒÑÐº Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾ (Ð±ÐµÐ· Docker)

```pip install -r requirements.txt```

```echo > news.db```

```python -m app.scheduler_main```


ÐŸÐ»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‰Ð¸Ðº Ð±ÑƒÐ´ÐµÑ‚ Ð¶Ð´Ð°Ñ‚ÑŒ 09:00 Ð¿Ð¾ Europe/Moscow.

ðŸ³ Docker (Dev)

``docker compose up --build
``

Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ .env Ð¸ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½ÑƒÑŽ news.db.


ðŸ©º Healthcheck

ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ Ð¸Ð¼ÐµÐµÑ‚ Ð²ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ñ‹Ð¹ self-check:
- ``` test: ["CMD", "python", "-m", "app.healthcheck"] ```

ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ÑÑ:

- ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ÑÑ‚ÑŒ .env
- Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚ÑŒ Ð‘Ð”
- Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ/Ð·Ð°Ð¿Ð¸ÑÐ¸
- Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ðµ ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð¾ÑˆÐ¸Ð±Ð¾Ðº
- 
```Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð° Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ: healthy.```

ðŸ§± Docker (Production)

```mkdir -p data logs```
```touch data/news.db```

Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ .env.prod:
```TELEGRAM_BOT_TOKEN=...
TELEGRAM_CHAT_ID=...
TELEGRAM_ERROR_CHAT_ID=...
DATABASE_PATH=/app/news.db
```
Ð—Ð°Ð¿ÑƒÑÐº Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½Ð°

```docker compose -f docker-compose.production.yml up -d --build```

ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°:

```docker ps```

```docker logs news-bot --tail 50```

ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ð¹ Ð»Ð¾Ð³:

ÐŸÐ»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‰Ð¸Ðº Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½. ÐžÐ¶Ð¸Ð´Ð°ÑŽ ÐµÐ¶ÐµÐ´Ð½ÐµÐ²Ð½Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº Ð² 09:00 (Europe/Moscow).

Ð›Ð¾Ð³Ð¸

ÐÐ° Ñ…Ð¾ÑÑ‚Ðµ:

```logs/app.log``` 

```logs/error.log```

ðŸ”§ ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° Ð·Ð°Ð¿ÑƒÑÐºÐ° (ÐºÑ€Ð°Ñ‚ÐºÐ¾)

1. Scheduler Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ Ð² 09:00.
2. Ð’Ñ‹Ð±Ð¸Ñ€Ð°ÐµÑ‚ Ð½Ð°Ð±Ð¾Ñ€ ÑÐ°Ð¹Ñ‚Ð¾Ð² Ð¿Ð¾ Ð´Ð½ÑŽ Ð½ÐµÐ´ÐµÐ»Ð¸.

3. Ð¡Ð¾Ð±Ð¸Ñ€Ð°ÐµÑ‚ ÑÑÑ‹Ð»ÐºÐ¸.

4. ÐŸÐ°Ñ€ÑÐ¸Ñ‚ HTML â†’ Ñ‚ÐµÐºÑÑ‚.

5. Ð“Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ title + summary.

6. Ð¡Ñ‡Ð¸Ñ‚Ð°ÐµÑ‚ÑÑ TF-IDF score.

7. Ð¡Ñ‚Ð°Ñ‚ÑŒÐ¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑŽÑ‚ÑÑ Ð² SQLite.

8. ÐŸÑƒÐ±Ð»Ð¸ÐºÑƒÐµÑ‚ÑÑ Ñ‚Ð¾Ð¿-5.

9. Ð’ ÑÑƒÐ±Ð±Ð¾Ñ‚Ñƒ â€” Ð¿Ð¾Ð´Ð±Ð¾Ñ€ÐºÐ° Ñ‚ÑƒÐ»Ð·Ð¾Ð².

10. Ð’ Ð²Ð¾ÑÐºÑ€ÐµÑÐµÐ½ÑŒÐµ â€” Ð´Ð°Ð¹Ð´Ð¶ÐµÑÑ‚ Ð½ÐµÐ´ÐµÐ»Ð¸.

ðŸ—º Ð”Ð¾Ñ€Ð¾Ð¶Ð½Ð°Ñ ÐºÐ°Ñ€Ñ‚Ð°

- Ð Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ñ‹Ð¹ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ (Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ðµ Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹, Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€ÑÑŽÑ‰Ð¸ÐµÑÑ Ð¾ÑˆÐ¸Ð±ÐºÐ¸).
- Retry + ÐºÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ HTTP-Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð².
- Ð£Ð»ÑƒÑ‡ÑˆÐµÐ½Ð½Ð°Ñ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ñ (Ð¿Ð¾ Ð´Ð°Ñ‚Ðµ, Ð´Ð»Ð¸Ð½Ðµ Ñ‚ÐµÐºÑÑ‚Ð°, ÑÐ·Ñ‹ÐºÑƒ).
- Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ RSS/JSON API.
- LLM-Ð¼Ð¾Ð´ÑƒÐ»Ð¸ Ð´Ð»Ñ summary/Ñ‚ÐµÐ³Ð¾Ð².
- ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ° ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð° Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹.

ðŸ“ Ð›Ð¸Ñ†ÐµÐ½Ð·Ð¸Ñ
MIT â€” Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ ÑÐ²Ð¾Ð±Ð¾Ð´Ð½Ð¾.

â­ ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚

Ð•ÑÐ»Ð¸ Ð±Ð¾Ñ‚ Ð¾ÐºÐ°Ð·Ð°Ð»ÑÑ Ð¿Ð¾Ð»ÐµÐ·Ð½Ñ‹Ð¼ â€” Ð¿Ð¾ÑÑ‚Ð°Ð²ÑŒ â­ Ð½Ð° GitHub. Ð­Ñ‚Ð¾ Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÑ‚ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ñƒ Ñ€Ð°ÑÑ‚Ð¸ ðŸ™Œ
```
---

## `PRODUCTION_DEPLOY.md`

```markdown
# ðŸ›  PRODUCTION_DEPLOY.md â€” Ð·Ð°Ð¿ÑƒÑÐº News Bot Ð² Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½Ðµ

Ð­Ñ‚Ð¾Ñ‚ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ Ð¾Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÑ‚ Ñ€Ð°Ð·Ð²Ñ‘Ñ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ News Bot Ð½Ð° Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ (VPS / Dedicated / Railway / Render) Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Docker Ð¸ Docker Compose.

---

## 1. Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

- Linux-ÑÐµÑ€Ð²ÐµÑ€ (Ubuntu 20.04+ Ð¸Ð»Ð¸ Ð°Ð½Ð°Ð»Ð¾Ð³Ð¸Ñ‡Ð½Ñ‹Ð¹)
- Docker 24+
- Docker Compose v2+
- ÐŸÑ€Ð°Ð²Ð° `sudo`
- Telegram Bot Token
- ID Ñ‡Ð°Ñ‚Ð°/ÐºÐ°Ð½Ð°Ð»Ð° Ð´Ð»Ñ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸ Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹
- ID Ñ‡Ð°Ñ‚Ð°/ÐºÐ°Ð½Ð°Ð»Ð° Ð´Ð»Ñ Ð¾ÑˆÐ¸Ð±Ð¾Ðº (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)

---

## 2. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Docker Ð¸ Docker Compose

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð´Ð»Ñ Ubuntu:

```bash
sudo apt update
sudo apt install -y ca-certificates curl gnupg lsb-release

curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker.gpg

echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker.gpg] \
  https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" \
  | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin
```

## ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°

```mermaid
flowchart LR
  S[APScheduler] --> P[NewsProfessor]
  P --> F["Fetch & Parse"]
  F --> R["Rank (TF-IDF / keywords)"]
  R --> D[(SQLite)]
  D --> T["Telegram Post"]
  D --> M[Monitoring]
  M --> A["Alert to Telegram"]

